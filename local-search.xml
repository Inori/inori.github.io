<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>投影矩阵的推导过程</title>
    <link href="/2023/07/24/%E6%8A%95%E5%BD%B1%E7%9F%A9%E9%98%B5%E7%9A%84%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B/"/>
    <url>/2023/07/24/%E6%8A%95%E5%BD%B1%E7%9F%A9%E9%98%B5%E7%9A%84%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p>目标如下图所示，把View Space的坐标映射到Clip Space: </p><img src="/2023/07/24/%E6%8A%95%E5%BD%B1%E7%9F%A9%E9%98%B5%E7%9A%84%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B/map.png" class="" title="空间映射">                                         <p>这里先做一些前置说明：<br>设View Space (也可以叫做Eye Space)里的点坐标为 $\left( x_e, y_e, z_e, 1 \right) $<br>设Clip Space 里的点坐标为 $\left( x_c, y_c, z_c, w_c \right) $<br>设 NDC Space 里点的坐标为 $\left( x_n, y_n, z_n, 1 \right) $</p><p>同时不考虑viewport非中心对称的情况 (非中心对称时$x_e$和$x_c$并非线性关系)</p><p>以下为推导过程：</p><img src="/2023/07/24/%E6%8A%95%E5%BD%B1%E7%9F%A9%E9%98%B5%E7%9A%84%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B/proc1.jpg" class="" title="proc1"><img src="/2023/07/24/%E6%8A%95%E5%BD%B1%E7%9F%A9%E9%98%B5%E7%9A%84%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B/proc2.jpg" class="" title="proc2"><img src="/2023/07/24/%E6%8A%95%E5%BD%B1%E7%9F%A9%E9%98%B5%E7%9A%84%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B/proc3.jpg" class="" title="proc3"><br/> <br/><p>同时观察$z_e$和$z_n$之前的映射关系:</p><img src="/2023/07/24/%E6%8A%95%E5%BD%B1%E7%9F%A9%E9%98%B5%E7%9A%84%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B/proc4.jpg" class="" title="proc4"><br/> <br/><p>画个函数图像，绿色和红色$(n,f)$取值分别为 (1, 3), (1, 100):</p><img src="/2023/07/24/%E6%8A%95%E5%BD%B1%E7%9F%A9%E9%98%B5%E7%9A%84%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B/z_map.jpg" class="" title="z_map"> <p>从图上可以看出：<br>相同$f$值的情况下，$z_e$越接近远平面，其变化引起$z_n$的变化越不明显<br>相同$z_e$值的情况下，$f$越小，变化率(导数)越大<br>这个特性和z-fighting相关，因为$f$较大的情况下，$z_e$的微小变动几乎不会引起$z_n$的变化</p><p>这里想到一点，就是depth buffer里存储的是perspective divide之后的z值，所以early depth test发生在<br>perspective divide之后</p>]]></content>
    
    
    <categories>
      
      <category>Mathematics for Computer Graphics</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Math</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>对法线变换矩阵的理解</title>
    <link href="/2023/07/23/%E5%AF%B9%E6%B3%95%E7%BA%BF%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <url>/2023/07/23/%E5%AF%B9%E6%B3%95%E7%BA%BF%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>tangent向量($T$)表示和surface平行的向量，在三角形中可以用两个vertex的差计算，<br>所以T的变换矩阵和vertex的一样，但法线($N$)不同，由于有切变的存在，如果还用相同的矩阵左乘，变换之后的法线将不再和原来的surface垂直:  </p><img src="/2023/07/23/%E5%AF%B9%E6%B3%95%E7%BA%BF%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5%E7%9A%84%E7%90%86%E8%A7%A3/error.jpg" class="" title="错误情况"><br/><br/><p>为了确保变换之后的法线依然垂直于surface, 可以从如下条件出发进行推导:<br>$$<br>N\cdot T&#x3D;N^{\prime}\cdot T^{\prime}&#x3D;0<br>$$</p><p>推导过程：  </p><img src="/2023/07/23/%E5%AF%B9%E6%B3%95%E7%BA%BF%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5%E7%9A%84%E7%90%86%E8%A7%A3/normal_transform.jpg" class="" title="过程推导"><br/><br/><p>最终有：<br>$$<br>G&#x3D;\left( M^{-1} \right) ^T<br>$$</p><p>即法线的变换矩阵是原矩阵的逆转置(inverse transpose)  </p><p>如果原矩阵是正交矩阵，那么有：<br>$$<br>M^{-1}&#x3D;M^T<br>$$<br>代入上式可得：<br>$$<br>G&#x3D;M<br>$$<br>也就是说如果原来是正交变换，那么法线可以直接用原来的矩阵变换  </p><p>其实几何上是因为，正交矩阵行向量与列向量皆为正交的单位向量，所代表的变换只能是旋转或镜像，有保证原始图形不变形的特性，叫做保距映射，那么因为原来的图形没有变形，法线自然也就不用特殊处理</p>]]></content>
    
    
    <categories>
      
      <category>Mathematics for Computer Graphics</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Math</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/07/20/hello-world/"/>
    <url>/2023/07/20/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Math-test"><a href="#Math-test" class="headerlink" title="Math test"></a>Math test</h3><p>This is inline latex: $c &#x3D; \pm\sqrt{a^2+b^2}$</p><p>This is block level latex:</p><p>$$<br>c &#x3D; \pm\sqrt{a^2+b^2}<br>$$</p><p>This is block level latex with new lines:<br>$$<br>\begin{array}{}<br>\hat{f}\left( \xi \right) &#x3D;\int_{-\infty}^{\infty}{f\left( x \right) e^{-2\pi ix\xi}\mathrm{d}x}<br>\\<br>e^{i\varphi}&#x3D;\cos \varphi +i\sin \varphi<br>\\<br>e^{i\pi}+1&#x3D;0<br>\end{array}<br>$$</p><p>$$<br>\boldsymbol{A}&#x3D;\left[ \begin{array}{l}<br>    a_{11}&amp;a_{12}&amp;\cdots&amp;a_{1n}\\<br>    a_{21}&amp;a_{22}&amp;\cdots&amp;a_{2n}\\<br>    \vdots&amp;\vdots&amp;\ddots&amp;\vdots\\<br>    a_{n1}&amp;a_{n2}&amp;\cdots&amp;a_{nn}\\<br>\end{array} \right]<br>$$</p><p>$$<br>\boldsymbol{Ax}&#x3D;\left[ \begin{array}{l}<br>    a_{11}&amp;a_{12}&amp;\cdots&amp;a_{1n}\\<br>    a_{21}&amp;a_{22}&amp;\cdots&amp;a_{2n}\\<br>    \vdots&amp;\vdots&amp;\ddots&amp;\vdots\\<br>    a_{m1}&amp;a_{m2}&amp;\cdots&amp;a_{mn}\\<br>\end{array} \right] \left[ \begin{array}{l}<br>    x_1\\<br>    x_2\\<br>    \vdots\\<br>    x_n\\<br>\end{array} \right] &#x3D;\left[ \begin{array}{c}<br>    a_{11}x_1+a_{12}x_2+\cdots +a_{1n}x_n\\<br>    a_{21}x_1+a_{22}x_2+\cdots +a_{2n}x_n\\<br>    \vdots\\<br>    a_{m1}x_1+a_{m2}x_2+\cdots +a_{mn}x_n\\<br>\end{array} \right] \in \mathbb{R} ^m<br>$$</p><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    <categories>
      
      <category>Mathematics for Computer Graphics</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Math</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
